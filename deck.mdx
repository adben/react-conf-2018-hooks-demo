import { CodeSurferColumnLayout, Step, Code } from "code-surfer";
export { vsDarkFull as theme } from "code-surfer/themes";
import { nightOwl as hooksTheme } from "code-surfer/themes";
import GreetingLoader from "./src/greeting-loader";
import { Image } from "mdx-deck";

---

Gebaseerd op Dan Abramov's hooks [demo](https://youtu.be/dpw9EHDh2bM?t=1051) from React Conf 2018

& Rodrigo Pombo(@pomber)'s [Code-surfer](https://github.com/pomber/code-surfer/pull/58)

---

# React Hooks

---

<CodeSurferColumnLayout sizes={[1, 2]}>
  <Step subtitle="Hier is een simple React component">
    <GreetingLoader />
    <Code
      code={require("!!raw-loader!./src/greeting.1.1.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="we willen de 'name' bewerkbaar maken">
    <GreetingLoader />
    <Code
      code={require("!!raw-loader!./src/greeting.1.1.js").default}
      lang="jsx"
      focus="7"
    />
  </Step>
  <Step subtitle="Dus we veranderen het component in een class">
    <GreetingLoader version="class.1.1" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.1.1.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="voeg een state toe">
    <GreetingLoader version="class.1.2" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.1.2.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="en voeg een change handler toe die setState heet">
    <GreetingLoader version="class.1.3" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.1.3.js").default}
      lang="jsx"
      focus="10:12,15:17,25"
    />
  </Step>
  <Step subtitle="we kunnen nu de name editen en dat zou moeten werken">
    <GreetingLoader version="class.1.3" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.1.3.js").default}
      lang="jsx"
      focus="1:31"
    />
  </Step>
</CodeSurferColumnLayout>

---

But let's take a step back

---

<CodeSurferColumnLayout sizes={[1, 2]} themes={[null, hooksTheme]}>
  <Step subtitle="wat als we geen class zouden hoeven schrijven wanneer we een state willen gebruiken?">
    <GreetingLoader theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.1.1.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="we willen een input renderen met de naam zoals de value">
    <GreetingLoader theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.1.1.js").default}
      focus="5,10"
      lang="jsx"
    />
  </Step>
  <Step subtitle="we weten niet waar we de naam vandaan moeten halen, we vullen het later in.">
    <GreetingLoader theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.1.1.js").default}
      focus="5"
      lang="jsx"
    />
  </Step>
  <Step subtitle="we hebben ook een manier nodig om de name te updaten wanneer de input veranderd">
    <GreetingLoader theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.1.2.js").default}
      focus="6,8:10,15[29:55]"
      lang="jsx"
    />
  </Step>
  <Step subtitle="name en setName lijken op elkaar, laten we ze samen voegen.">
    <GreetingLoader theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.1.2.js").default}
      focus="5:6"
      lang="jsx"
    />
  </Step>
  <Step subtitle="waar kunnen we de name en setName verkrijgen?">
    <GreetingLoader theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.1.3.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="wat als we gewoon de state van React **use**?">
    <GreetingLoader version="hooks.1.4" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.1.4.js").default}
      focus="1[15:40],5"
      lang="jsx"
    />
  </Step>
</CodeSurferColumnLayout>

---

<CodeSurferColumnLayout themes={[null, hooksTheme]}>
  <Step>
    <Code
      code={require("!!raw-loader!./src/greeting.class.1.3.js").default}
      lang="jsx"
      title="Voor Hooks"
      subtitle="Een class component met state"
    />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.1.4.js").default}
      lang="jsx"
      title="Na Hooks"
      subtitle="Een function component met state"
    />
  </Step>
  <Step>
    <Code
      code={require("!!raw-loader!./src/greeting.class.1.3.js").default}
      lang="jsx"
      title="Voor Hooks"
      subtitle="state moet een object zijn"
      focus="7:9"
    />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.1.4.js").default}
      lang="jsx"
      title="Na Hooks"
      subtitle="state zou alles kunnen zijn"
      focus="5"
    />
  </Step>
  <Step>
    <Code
      code={require("!!raw-loader!./src/greeting.class.1.3.js").default}
      lang="jsx"
      title="Voor Hooks"
      subtitle="we lezen en updaten de state met this.state en this.setState."
      focus="7:12,16,24"
    />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.1.4.js").default}
      lang="jsx"
      title="Na Hooks"
      subtitle="de state en de setter zijn alleen variabelen in de function."
      focus="5,8,14[16:27]"
    />
  </Step>
  <Step subtitle="Wat is useState precies? useState is een hook, een function vanuit React die je in de React features laat inhaken vanuit je function components.">
    <Code
      code={require("!!raw-loader!./src/greeting.class.1.3.js").default}
      lang="jsx"
      title="Voor Hooks"
      focus="1[100],31[100]"
    />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.1.4.js").default}
      lang="jsx"
      title="Na Hooks"
      subtitle="maar 1 regel"
      focus="1[1:7,15:40],5"
    />
  </Step>
</CodeSurferColumnLayout>

---

<CodeSurferColumnLayout sizes={[1, 2]}>
  <Step subtitle="Nu willen we een tweede field toevoegen voor de surname">
    <GreetingLoader version="class.1.3" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.1.3.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="dus we voegen nog een key toe aan de state en kopieren alle boilerplate">
    <GreetingLoader version="class.2.1" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.2.1.js").default}
      lang="jsx"
    />
  </Step>
</CodeSurferColumnLayout>

---

<CodeSurferColumnLayout sizes={[1, 2]} themes={[null, hooksTheme]}>
  <Step subtitle="laten we hetzelfde doen met hooks">
    <GreetingLoader version="hooks.1.4" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.1.4.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="we verklaren gewoon een tweede state voor surname en renderen het">
    <GreetingLoader version="hooks.2.1" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.2.1.js").default}
      lang="jsx"
    />
  </Step>
</CodeSurferColumnLayout>

---

<CodeSurferColumnLayout sizes={[1, 2]}>
  <Step subtitle="Laten we dingen lezen van context">
    <GreetingLoader version="class.2.1" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.2.1.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="allereerst importen we de context van een andere file">
    <GreetingLoader version="class.3.1" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.3.1.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="we krijgen het theme door het gebruiken van de context render prop API">
    <GreetingLoader version="class.3.2" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.3.2.js").default}
      lang="jsx"
      focus="30,31,32[20:37],46,47"
    />
  </Step>
  <Step subtitle="en hetzelfde doen met de locale">
    <GreetingLoader version="class.3.3" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.3.3.js").default}
      lang="jsx"
    />
  </Step>
</CodeSurferColumnLayout>

---

<CodeSurferColumnLayout sizes={[1, 2]} themes={[null, hooksTheme]}>
  <Step subtitle="Hoe kunnen we hetzelfde doen met hooks?">
    <GreetingLoader version="hooks.2.1" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.2.1.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="we importen useContext van React">
    <GreetingLoader version="hooks.3.1" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.3.1.js").default}
      lang="jsx"
      focus="1[27:37,40:52],3"
    />
  </Step>
  <Step subtitle="we kunnen de theme (en subscribe to updates) krijgen door alleen de hook te gebruiken">
    <GreetingLoader version="hooks.3.2" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.3.2.js").default}
      lang="jsx"
      focus="8,19[14:30]"
    />
  </Step>
  <Step subtitle="">
    <GreetingLoader version="hooks.3.3" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.3.3.js").default}
      lang="jsx"
    />
  </Step>
</CodeSurferColumnLayout>

---

<CodeSurferColumnLayout themes={[null, hooksTheme]}>
  <Step subtitle="met de context hook komen we van de render prop wrapper af">
    <Code
      code={require("!!raw-loader!./src/greeting.class.3.3.js").default}
      lang="jsx"
      title="Voor Hooks"
      focus="30,31,45,46,48,49,51,52"
    />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.3.3.js").default}
      lang="jsx"
      title="Na Hooks"
      focus="8,9"
    />
  </Step>
</CodeSurferColumnLayout>

---

<CodeSurferColumnLayout sizes={[1, 2]}>
  <Step subtitle="Laten we nu het document title updaten door lifecycle methods te gebruiken">
    <GreetingLoader version="class.3.3" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.3.3.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="we doen het door componentDidMount en componentDidUpdate te implementeren">
    <GreetingLoader version="class.4.1" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.4.1.js").default}
      lang="jsx"
    />
  </Step>
</CodeSurferColumnLayout>

---

<CodeSurferColumnLayout sizes={[1, 2]} themes={[null, hooksTheme]}>
  <Step subtitle="Hoe doen we dit met hooks?">
    <GreetingLoader version="hooks.3.3" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.3.3.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="we hebben de useEffect hook">
    <GreetingLoader version="hooks.4.1" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.4.1.js").default}
      lang="jsx"
      focus="1,4,5"
    />
  </Step>
  <Step subtitle="we passeren een function dat zal draaien na elke update en na de eerste render">
    <GreetingLoader version="hooks.4.2" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.4.2.js").default}
      lang="jsx"
    />
  </Step>
</CodeSurferColumnLayout>

---

<CodeSurferColumnLayout themes={[null, hooksTheme]}>
  <Step>
    <Code
      code={require("!!raw-loader!./src/greeting.class.4.1.js").default}
      lang="jsx"
      title="Voor Hooks"
      focus="20:28"
      subtitle="We hebben een andere lifecylcle methode voor mount en update"
    />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.4.2.js").default}
      lang="jsx"
      title="Na Hooks"
      focus="15:17"
    />
  </Step>
  <Step>
    <Code
      code={require("!!raw-loader!./src/greeting.class.4.1.js").default}
      lang="jsx"
      title="Voor Hooks"
      focus="20:28"
      subtitle="we gebruiken this.state om toegang te krijgen tot state"
    />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.4.2.js").default}
      lang="jsx"
      title="Na Hooks"
      focus="15:17"
      subtitle="het effect is binnen de function component zodat we de variabelen van de function scope kunnen gebruiken"
    />
  </Step>
</CodeSurferColumnLayout>

---

<CodeSurferColumnLayout sizes={[1, 2]}>
  <Step subtitle="We willen nu inschrijven in het windows resize evenement">
    <GreetingLoader version="class.4.1" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.4.1.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="we voegen de window width toe aan de state">
    <GreetingLoader version="class.5.1" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.5.1.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="voeg een row toe om het te renderen">
    <GreetingLoader version="class.5.2" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.5.2.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="voeg een listener toe wanneer het component mounts">
    <GreetingLoader version="class.5.3" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.5.3.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="en verwijder de listener voordat de component unmounts">
    <GreetingLoader version="class.5.4" />
    <Code
      code={require("!!raw-loader!./src/greeting.class.5.4.js").default}
      lang="jsx"
    />
  </Step>
</CodeSurferColumnLayout>

---

<CodeSurferColumnLayout sizes={[1, 2]} themes={[null, hooksTheme]}>
  <Step subtitle="Laten we hetzelfde doen met hooks">
    <GreetingLoader version="hooks.4.2" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.4.2.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="eerst gebruiken we een nieuwe state voor de width">
    <GreetingLoader version="hooks.5.1" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.5.1.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="dan gebruiken we een tweede effect om de resize te behandelen">
    <GreetingLoader version="hooks.5.2" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.5.2.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="we kunnen een clean up function specificeren, met hetzelfde effect, door het terug te brengen">
    <GreetingLoader version="hooks.5.3" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.5.3.js").default}
      lang="jsx"
      focus="20,23:26"
    />
  </Step>
</CodeSurferColumnLayout>

---

<CodeSurferColumnLayout themes={[null, hooksTheme]}>
  <Step>
    <Code
      code={require("!!raw-loader!./src/greeting.class.5.4.js").default}
      lang="jsx"
      title="Voor Hooks"
      focus="22:35"
      subtitle="de logica van het verschillende effect is gemixt en gesplit op andere manieren"
    />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.5.3.js").default}
      lang="jsx"
      title="Na Hooks"
      focus="15:17,20:26"
      subtitle="de code is uit elkaar gehaald gebaseerd op what is doing in plaats van when it runs"
    />
  </Step>
</CodeSurferColumnLayout>

---

...One more thing...

---

<CodeSurferColumnLayout sizes={[1, 2]} themes={[null, hooksTheme]}>
  <Step subtitle="deze function is best groot">
    <GreetingLoader version="hooks.5.3" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.5.3.js").default}
      lang="jsx"
      focus="1:51"
    />
  </Step>
  <Step subtitle="hook calls zijn alleen function calls">
    <GreetingLoader version="hooks.5.3" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.5.3.js").default}
      lang="jsx"
      focus="19:26"
    />
  </Step>
  <Step subtitle="dus we kunnen ze extracten">
    <GreetingLoader version="hooks.6.1" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.6.1.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="">
    <GreetingLoader version="hooks.6.2" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.6.2.js").default}
      lang="jsx"
    />
  </Step>
  <Step subtitle="we kunnen ook duplicatie verminderen">
    <GreetingLoader version="hooks.6.2" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.6.2.js").default}
      lang="jsx"
      focus="10,11,17:23,28,31:34"
    />
  </Step>
  <Step subtitle="">
    <GreetingLoader version="hooks.6.3" theme={hooksTheme} />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.6.3.js").default}
      lang="jsx"
      focus="10,11,20,23,31:40"
    />
  </Step>
</CodeSurferColumnLayout>

---

<CodeSurferColumnLayout themes={[null, hooksTheme]}>
  <Step>
    <Code
      code={require("!!raw-loader!./src/greeting.class.5.4.js").default}
      lang="jsx"
      focus="5:77"
    />
    <Code
      code={require("!!raw-loader!./src/greeting.hooks.6.3.js").default}
      lang="jsx"
      focus="9:58"
    />
  </Step>
</CodeSurferColumnLayout>
